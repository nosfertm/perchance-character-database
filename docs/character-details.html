<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Perchance DB</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css" rel="stylesheet">

    <!-- Font Awesome via CDN -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

    <!-- Custom CSS -->
    <link href="css/main.css" rel="stylesheet">
    <link href="css/theme.css" rel="stylesheet">
    <link href="css/character-details.css" rel="stylesheet">

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
</head>

<body>
    <!-- Vue 3 App Container -->
    <div id="app" v-cloak class="d-flex flex-column min-vh-100">

        <!-- Login modal component -->
        <login-modal-component :is-dark-mode="isDarkMode" @login-changed="user = $event"></login-modal-component>

        <!-- Navigation bar component -->
        <navbar-component></navbar-component>

        <!-- Main Content -->
        <div v-if="!loadingPage">

            <!-- content -->
            <section class="mt-4">
                <div class="container">
                    <div class="row gx-5">

                        <!-- Character Image Container -->
                        <aside class="col-lg-6">
                            <div class="img-container border rounded-4 mb-3 d-flex justify-content-center">
                                <img :src="characterData?.image_url || characterData?.imageUrl" alt="Character Image"
                                    class="img-fluid w-100 h-100 object-fit-cover"
                                    :class="{'nsfw-blur': characterData?.is_nsfw && characterData?.blur_nsfw && !show_nsfw}"
                                    @click.stop="openImageModal">

                                <!-- NSFW overlay with flame icon -->
                                <div v-if="characterData?.is_nsfw && characterData?.blur_nsfw && !show_nsfw" class="nsfw-overlay"
                                    @click.stop="toggleNsfw">
                                    <i class="fa-solid fa-fire-flame-curved fa-2x"></i>
                                </div>
                            </div>
                        </aside>

                        <!-- Modal for Full Image -->
                        <div v-if="isModalOpen" class="image-modal" @click="isModalOpen = false">
                            <div class="modal-content" style="border-radius: 15px;">
                                <img :src="characterData?.image_url || characterData?.imageUrl" alt="Character Image">
                            </div>
                        </div>


                        <main class="col-lg-6">
                            <div class="ps-lg-3">
                                <h4 class="h4 mb-0">
                                    {{characterData?.name}}
                                </h4>
                                <div class="mb-3 align-items-center">
                                    <!-- <div class="text-warning mb-1 me-2">
                                        <i class="fa fa-star"></i>
                                        <i class="fa fa-star"></i>
                                        <i class="fa fa-star"></i>
                                        <i class="fa fa-star"></i>
                                        <i class="fas fa-star-half-alt"></i>
                                        <span class="ms-1">
                                            4.5
                                        </span>
                                    </div> -->
                                    <small class="me-1" style="color: var(--text-muted-strong);">by</small>
                                    <a class="mb-2" style="color: var(--text-muted-strong)"
                                        :href="'author.html?id=' + characterData?.author_id" class="author-link">
                                        {{characterData?.author}}</a>
                                </div>

                                <div class="mb-4">
                                    <span class="h5 mb-1">Description:</span>
                                    <p>
                                        {{characterData?.description}}
                                    </p>
                                </div>

                                <!-- Statistics section with responsive display -->
                                <div class="character-stats d-flex justify-content-around align-items-center rounded-3 p-2 mb-4 mt-auto"
                                    :class="stTheme.isDarkMode ? 'bg-dark' : 'bg-body-tertiary'">

                                    <!-- Chat statistics -->
                                    <div class="text-center">
                                        <p class="stats-label small mb-1">Chats</p>
                                        <i class="fas fa-comments stats-icon"></i>
                                        <p class="stats-value mb-0">{{ characterData?.global_chat_clicks ||
                                            characterData?.chat_clicks }}</p>
                                    </div>

                                    <!-- Download statistics -->
                                    <div class="text-center">
                                        <p class="stats-label small mb-1">Downloads</p>
                                        <i class="fas fa-download stats-icon"></i>
                                        <p class="stats-value mb-0">{{ characterData?.global_download_clicks ||
                                            characterData?.download_clicks }}
                                        </p>
                                    </div>

                                    <!-- Favorites statistics -->
                                    <div class="text-center">
                                        <p class="stats-label small mb-1">Favorites</p>
                                        <i class="fas fa-heart stats-icon"></i>
                                        <p class="stats-value mb-0">{{ characterData?.global_favorites_count ||
                                            characterData?.favorites_count }}
                                        </p>
                                    </div>
                                </div>

                                <div class="d-flex justify-content-between align-items-center">
                                    <!-- Main action buttons -->
                                    <div>
                                        <button class="btn btn-primary shadow-0 me-2 btn-icon"
                                            @click="openChat(characterData?.share_url)">
                                            <i class="fa fa-comments"></i> <span class="d-none d-sm-inline">Chat</span>
                                        </button>
                                        <button class="btn btn-success shadow-0 me-2 btn-icon"
                                            @click="downloadCharacterFile(characterData?.download_path)">
                                            <i class="fa fa-download"></i> <span class="d-none d-sm-inline">Download</span>
                                        </button>
                                        <button
                                            :class="characterData?.is_favorited ? 'favorite-btn favorited' : 'favorite-btn not-favorited'"
                                            class="btn border border-secondary shadow-0 btn-icon"
                                            @click="toggleFavorite(characterData?.id)">
                                            <i
                                                :class="characterData?.is_favorited ? 'fa-solid fa-heart' : 'fa-regular fa-heart'"></i>
                                            <span class="d-none d-sm-inline">
                                                {{ characterData?.is_favorited ? ' Remove' : ' Add' }}
                                            </span>
                                        </button>
                                    </div>

                                    <!-- Report dropdown -->
                                    <div class="dropdown">
                                        <button class="btn btn-danger shadow-0 btn-icon" data-bs-toggle="dropdown">
                                            <i class="fa fa-exclamation-triangle"></i> <span
                                                class="d-none d-sm-inline">Report</span>
                                        </button>
                                        <ul class="dropdown-menu">
                                            <li><a class="dropdown-item disabled" href="#">Implementing soon...</a></li>
                                            <li><a class="dropdown-item disabled" href="#">Wrong Rating (Disabled)</a></li>
                                            <li><a class="dropdown-item disabled" href="#">Missing Avatar (Disabled)</a>
                                            </li>
                                        </ul>
                                    </div>
                                </div>



                            </div>
                        </main>
                    </div>
                </div>
            </section>
            <!-- content -->

            <section class="py-4">
                <div class="container">
                    <div class="row gx-4">
                        <div class="mb-4"
                        :class="otherCharacters?.length > 0 ? 'col-lg-8' : 'col-12'">
                            <div class="border rounded-2 px-3 py-2" :class="stTheme.isDarkMode ? 'bg-secondary' : ''">

                                <!-- Pills navs -->
                                <div class="container mt-4">
                                    <!-- Pills dinâmicos baseados nas configurações disponíveis -->
                                    <ul class="nav nav-pills nav-justified mb-3">
                                        <li v-for="(tab, index) in featureTabs" :key="index" class="nav-item d-flex"
                                            role="presentation">
                                            <button v-if="tab.show"
                                                class="nav-link d-flex align-items-center justify-content-center w-100"
                                                :class="{ active: activeTab === tab.key }" @click="getCharData(tab.key)">
                                                {{ tab.label }}
                                            </button>
                                        </li>
                                    </ul>

                                    <div class="tab-content">
                                        <!-- Conteúdo para features (mantido como estava) -->
                                        <div v-show="activeTab === 'features'" class="tab-pane fade"
                                            :class="activeTab === 'features' ? 'show active' : ''">
                                            <table class="table border mt-3 mb-2"
                                                :class="stTheme.isDarkMode ? 'table-dark' : ''">
                                                <tbody>
                                                    <tr v-show="characterData?.categories?.features_custom_code">
                                                        <th>
                                                            Custom Code
                                                            <span class="ms-1" data-bs-toggle="tooltip"
                                                                data-bs-custom-class="custom-tooltip"
                                                                title="Any custom code snippets.">
                                                                <i class="bi bi-question-circle small-icon"></i>
                                                            </span>
                                                        </th>
                                                        <td>
                                                            <div class="progress">
                                                                <div class="progress-bar" role="progressbar"
                                                                    style="width: 100%;" aria-valuenow="100"
                                                                    aria-valuemin="0" aria-valuemax="100">
                                                                    {{
                                                                    extractFromArray(characterData?.categories?.features_custom_code)
                                                                    }}
                                                                </div>
                                                            </div>
                                                        </td>
                                                    </tr>
                                                    <tr v-show="characterData?.categories?.features_customcode">
                                                        <th>
                                                            Custom Code (Alt)
                                                            <span class="ms-1" data-bs-toggle="tooltip"
                                                                data-bs-custom-class="custom-tooltip"
                                                                title="Alternative custom code.">
                                                                <i class="bi bi-question-circle small-icon"></i>
                                                            </span>
                                                        </th>
                                                        <td>
                                                            <div class="progress">
                                                                <div class="progress-bar" role="progressbar"
                                                                    style="width: 100%;" aria-valuenow="100"
                                                                    aria-valuemin="0" aria-valuemax="100">
                                                                    {{
                                                                    extractFromArray(characterData?.categories?.features_customcode)
                                                                    }}
                                                                </div>
                                                            </div>
                                                        </td>
                                                    </tr>
                                                    <tr v-show="characterData?.categories?.features_imageprompttriggers">
                                                        <th>
                                                            Image Prompt Triggers
                                                            <span class="ms-1" data-bs-toggle="tooltip"
                                                                data-bs-custom-class="custom-tooltip"
                                                                title="Triggers for image prompts.">
                                                                <i class="bi bi-question-circle small-icon"></i>
                                                            </span>
                                                        </th>
                                                        <td>
                                                            <div class="progress">
                                                                <div class="progress-bar" role="progressbar"
                                                                    style="width: 100%;" aria-valuenow="100"
                                                                    aria-valuemin="0" aria-valuemax="100">
                                                                    {{
                                                                    extractFromArray(characterData?.categories?.features_imageprompttriggers)
                                                                    }}
                                                                </div>
                                                            </div>
                                                        </td>
                                                    </tr>
                                                    <tr v-show="characterData?.categories?.features_imagepromptsuffix">
                                                        <th>
                                                            Image Prompt Suffix
                                                            <span class="ms-1" data-bs-toggle="tooltip"
                                                                data-bs-custom-class="custom-tooltip"
                                                                title="Suffix for image prompts.">
                                                                <i class="bi bi-question-circle small-icon"></i>
                                                            </span>
                                                        </th>
                                                        <td>
                                                            <div class="progress">
                                                                <div class="progress-bar" role="progressbar"
                                                                    style="width: 100%;" aria-valuenow="100"
                                                                    aria-valuemin="0" aria-valuemax="100">
                                                                    {{
                                                                    extractFromArray(characterData?.categories?.features_imagepromptsuffix)
                                                                    }}
                                                                </div>
                                                            </div>
                                                        </td>
                                                    </tr>
                                                    <tr v-show="characterData?.categories?.features_imagepromptprefix">
                                                        <th>
                                                            Image Prompt Prefix
                                                            <span class="ms-1" data-bs-toggle="tooltip"
                                                                data-bs-custom-class="custom-tooltip"
                                                                title="Prefix for image prompts.">
                                                                <i class="bi bi-question-circle small-icon"></i>
                                                            </span>
                                                        </th>
                                                        <td>
                                                            <div class="progress">
                                                                <div class="progress-bar" role="progressbar"
                                                                    style="width: 100%;" aria-valuenow="100"
                                                                    aria-valuemin="0" aria-valuemax="100">
                                                                    {{
                                                                    extractFromArray(characterData?.categories?.features_imagepromptprefix)
                                                                    }}
                                                                </div>
                                                            </div>
                                                        </td>
                                                    </tr>
                                                    <tr v-show="characterData?.categories?.features_initialmessages">
                                                        <th>
                                                            Initial Messages
                                                            <span class="ms-1" data-bs-toggle="tooltip"
                                                                data-bs-custom-class="custom-tooltip"
                                                                title="Size of initial messages.">
                                                                <i class="bi bi-question-circle small-icon"></i>
                                                            </span>
                                                        </th>
                                                        <td>
                                                            <div class="progress">
                                                                <div class="progress-bar"
                                                                    :class="getMessageProgressBarClass(characterData?.categories?.features_initialmessages)"
                                                                    role="progressbar"
                                                                    :style="{ width: getMessageProgressBarWidth(characterData?.categories?.features_initialmessages) }"
                                                                    aria-valuenow="100" aria-valuemin="0"
                                                                    aria-valuemax="100">
                                                                    {{
                                                                    extractFromArray(characterData?.categories?.features_initialmessages)
                                                                    }}
                                                                </div>
                                                            </div>
                                                        </td>
                                                    </tr>
                                                    <tr v-show="characterData?.categories?.features_lorebooks">
                                                        <th>
                                                            Lore Books
                                                            <span class="ms-1" data-bs-toggle="tooltip"
                                                                data-bs-custom-class="custom-tooltip"
                                                                title="Number of lore books.">
                                                                <i class="bi bi-question-circle small-icon"></i>
                                                            </span>
                                                        </th>
                                                        <td>{{
                                                            extractFromArray(characterData?.categories?.features_lorebooks)
                                                            }}</td>
                                                    </tr>
                                                    <tr v-show="characterData?.categories?.features_remindermessage">
                                                        <th>
                                                            Reminder Message
                                                            <span class="ms-1" data-bs-toggle="tooltip"
                                                                data-bs-custom-class="custom-tooltip"
                                                                title="Message for reminders.">
                                                                <i class="bi bi-question-circle small-icon"></i>
                                                            </span>
                                                        </th>
                                                        <td>
                                                            <div class="progress">
                                                                <div class="progress-bar" role="progressbar"
                                                                    style="width: 100%;" aria-valuenow="100"
                                                                    aria-valuemin="0" aria-valuemax="100">
                                                                    {{
                                                                    extractFromArray(characterData?.categories?.features_remindermessage)
                                                                    }}
                                                                </div>
                                                            </div>
                                                        </td>
                                                    </tr>
                                                    <tr v-show="characterData?.categories?.features_roleinstruction">
                                                        <th>
                                                            Role Instructions
                                                            <span class="ms-1" data-bs-toggle="tooltip"
                                                                data-bs-custom-class="custom-tooltip"
                                                                title="Size of role instructions.">
                                                                <i class="bi bi-question-circle small-icon"></i>
                                                            </span>
                                                        </th>
                                                        <td>
                                                            <div class="progress">
                                                                <div class="progress-bar"
                                                                    :class="getMessageProgressBarClass(characterData?.categories?.features_roleinstruction)"
                                                                    role="progressbar"
                                                                    :style="{ width: getMessageProgressBarWidth(characterData?.categories?.features_roleinstruction) }"
                                                                    aria-valuenow="100" aria-valuemin="0"
                                                                    aria-valuemax="100">
                                                                    {{
                                                                    extractFromArray(characterData?.categories?.features_roleinstruction)
                                                                    }}
                                                                </div>
                                                            </div>
                                                        </td>
                                                    </tr>
                                                    <tr v-show="characterData?.categories?.features_scene">
                                                        <th>
                                                            Scene
                                                            <span class="ms-1" data-bs-toggle="tooltip"
                                                                data-bs-custom-class="custom-tooltip"
                                                                title="Scene description.">
                                                                <i class="bi bi-question-circle small-icon"></i>
                                                            </span>
                                                        </th>
                                                        <td>
                                                            <div class="progress">
                                                                <div class="progress-bar" role="progressbar"
                                                                    style="width: 100%;" aria-valuenow="100"
                                                                    aria-valuemin="0" aria-valuemax="100">
                                                                    {{
                                                                    extractFromArray(characterData?.categories?.features_scene)
                                                                    }}
                                                                </div>
                                                            </div>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <th>
                                                            Customized User Character
                                                            <span class="ms-1" data-bs-toggle="tooltip"
                                                                data-bs-custom-class="custom-tooltip"
                                                                title="Is a customized user character.">
                                                                <i class="bi bi-question-circle small-icon"></i>
                                                            </span>
                                                        </th>
                                                        <td>
                                                            <span
                                                                :class="characterData?.categories?.features_usercharacter ? 'badge bg-success' : 'badge bg-danger'">
                                                                {{
                                                                extractFromArray(characterData?.categories?.features_usercharacter)
                                                                ? 'Yes' : 'No' }}
                                                            </span>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <th>
                                                            Customized System Character
                                                            <span class="ms-1" data-bs-toggle="tooltip"
                                                                data-bs-custom-class="custom-tooltip"
                                                                title="Is a customized system character.">
                                                                <i class="bi bi-question-circle small-icon"></i>
                                                            </span>
                                                        </th>
                                                        <td>
                                                            <span
                                                                :class="characterData?.categories?.features_systemcharacter ? 'badge bg-success' : 'badge bg-danger'">
                                                                {{
                                                                extractFromArray(characterData?.categories?.features_systemcharacter)
                                                                ? 'Yes' : 'No' }}
                                                            </span>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <th>
                                                            Avatar
                                                            <span class="ms-1" data-bs-toggle="tooltip"
                                                                data-bs-custom-class="custom-tooltip"
                                                                title="Has an avatar.">
                                                                <i class="bi bi-question-circle small-icon"></i>
                                                            </span>
                                                        </th>
                                                        <td>
                                                            <span
                                                                :class="characterData?.categories?.features_avatar ? 'badge bg-success' : 'badge bg-danger'">
                                                                {{
                                                                extractFromArray(characterData?.categories?.features_avatar)
                                                                ? 'Yes' : 'No' }}
                                                            </span>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>

                                        <!-- Dynamic content for other tabs -->
                                        <div v-for="(tab, index) in featureTabs.filter(t => t.key !== 'features')"
                                            :key="index" v-show="activeTab === tab.key" class="tab-pane fade"
                                            :class="activeTab === tab.key ? 'show active' : ''">

                                            <!-- Show loading spinner while charConfig is null -->
                                            <div v-if="loadingConfig" class="d-flex justify-content-center py-4">
                                                <div class="spinner-border" role="status">
                                                    <span class="visually-hidden">Loading...</span>
                                                </div>
                                            </div>

                                            <!-- Format content based on type -->
                                            <div v-else-if="tab.key === 'initialMessages'" class="chat-container">
                                                <div v-for="(message, idx) in parsedJsonContent" :key="idx"
                                                    class="message-bubble" :class="[
                                                        message.author === 'user' ? 'user-message' : 
                                                        message.author === 'ai' ? 'ai-message' : 'system-message'
                                                    ]">
                                                    <div class="message-author">{{ message.author }}</div>
                                                    <!-- Modificado para preservar quebras de linha e formatação especial -->
                                                    <div class="message-content formatted-content"
                                                        v-html="formatMessageContent(message.content)"></div>
                                                </div>
                                            </div>

                                            <!-- Format content based on type -->
                                            <div v-else-if="tab.key === 'categories'" class="content-section">
                                                <!-- Categories -->
                                                <div v-for="(category, categoryName, index) in filteredCategories"
                                                    class="mb-3 d-flex flex-wrap gap-2 align-items-center">
                                                    <template
                                                        v-if="Array.isArray(category) ? category.length > 0 : category">
                                                        <h6 :class="{ 'text-white': stTheme.isDarkMode }" class="mb-0 me-2">
                                                            {{categoryName.split(' ').map(word =>
                                                            word.charAt(0).toUpperCase() +
                                                            word.slice(1)).join(' ')}}:
                                                        </h6>
                                                        <span v-if="categoryName !== 'rating' || Array.isArray(category)"
                                                            v-for="tag in category" class="badge"
                                                            :class="characterData?.is_nsfw ? 'bg-danger' : 'bg-primary'">{{tag}}
                                                        </span>
                                                        <span v-else class="badge"
                                                            :class="characterData?.is_nsfw ? 'bg-danger' : 'bg-primary'">{{category}}</span>
                                                    </template>
                                                </div>
                                            </div>

                                            <!-- userCharacter section -->
                                            <div v-else-if="tab.key === 'userCharacter'" class="character-card">
                                                <pre>{{charConfig}}</pre>

                                                <div class="card character-profile">
                                                    <!-- Character avatar with dynamic size and shape -->
                                                    <div class="avatar-container text-center mb-3">
                                                        <img :src="parsedJsonContent.avatar?.url || 'path/to/default-avatar.png'"
                                                            :class="[
                                                            'character-avatar',
                                                            `size-${parsedJsonContent.avatar?.size || 3}`,
                                                            `shape-${parsedJsonContent.avatar?.shape || 'portrait'}`
                                                        ]" alt="Character Avatar" />
                                                    </div>

                                                    <!-- Character name and bio -->
                                                    <div class="card-body">
                                                        <h4 class="character-name">{{ parsedJsonContent.name || 'Unknown Character' }}</h4>
                                                        <div class="character-bio formatted-content"
                                                            v-html="formatMessageContent(parsedJsonContent.roleInstruction || '')">
                                                        </div>
                                                    </div>
                                                    
                                                </div>

                                            </div>

                                            <!-- Scene section -->
                                            <div v-else-if="tab.key === 'scene'" class="scene-container">

                                                <div class="scene-content">
                                                    <!-- Background image with modal functionality -->
                                                    <div class="background-image-container mb-4">
                                                        <h5 class="mb-3">Background Image:</h5>
                                                        <img v-if="parsedJsonContent.background?.url"
                                                            :src="parsedJsonContent.background.url"
                                                            class="scene-background img-fluid"
                                                            @click="openImageModal(parsedJsonContent.background.url)"
                                                            alt="Scene Background" />
                                                        <div v-else class="no-background-placeholder">
                                                            No background image available
                                                        </div>
                                                    </div>

                                                    <!-- Music player -->
                                                    <div v-if="parsedJsonContent.music?.url" class="music-player">
                                                        <h5 class="mb-3">Background Music:</h5>
                                                        <audio controls class="w-100">
                                                            <source :src="parsedJsonContent.music.url" type="audio/mpeg">
                                                            Your browser does not support the audio element.
                                                        </audio>
                                                    </div>
                                                </div>
                                                
                                            </div>



                                            <!-- Plain text output -->
                                            <pre v-else class="formatted-text">{{ charConfig }}</pre>
                                        </div>


                                    </div>
                                </div>
                                <!-- Pills content -->

                            </div>
                        </div>

                        <!-- Sidebar for other characters by the same author -->
                        <div v-if="otherCharacters?.length > 0" class="col-lg-4">
                            <div class="px-0 border rounded-2 shadow-0">
                                <div class="card">
                                    <div class="card-body"
                                        :class="stTheme.isDarkMode ? 'bg-dark text-white' : 'bg-body-tertiary'">
                                        <h5 class="card-title mb-3">More by this author:</h5>

                                        <div v-for="character in otherCharacters" class="d-flex mb-0">
                                            <a :href="'character-details.html?uuid=' + character.id" class="me-3 mb-4">
                                                <div style="overflow: hidden; position: relative;">
                                                    <img :src="character?.imageUrl || character?.imageurl || character?.image_url"
                                                        alt="Character Image" style="min-width: 100px; max-height: 120px;"
                                                        :style="character?.is_nsfw && character?.blur_nsfw ? 'filter: blur(5px);' : ''"
                                                        class="img-md img-thumbnail" @click.stop="toggleNsfw">

                                                    <!-- NSFW overlay with flame icon -->
                                                    <div v-if="character?.is_nsfw && character?.blur_nsfw"
                                                        class="nsfw-overlay" @click.stop="toggleNsfw">
                                                        <i class="fa-solid fa-fire-flame-curved fa-2x"></i>
                                                    </div>
                                                </div>
                                            </a>

                                            <div class="info">
                                                <a :href="'character-details.html?uuid=' + character.id"
                                                    class="nav-link mb-1">
                                                    {{character?.name}}
                                                </a>
                                            </div>

                                        </div>

                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

        </div>

    <!-- Dynamic Loading Component (Vertically Centered) -->
<div v-else class="loading-container-fullpage" :class="{ 'dark-theme': stTheme.isDarkMode }">
    <div class="loading-content text-center">
        <!-- Animated loading spinner -->
        <div class="spinner-container mb-4">
            <div class="spinner-border text-primary" role="status" style="width: 3rem; height: 3rem;">
                <span class="visually-hidden">Loading...</span>
            </div>
        </div>
        
        <!-- Random loading message -->
        <h5 class="loading-message mb-3">{{ stSite.getMessage() }}</h5>
        
        <!-- Optional progress indicator -->
        <div v-if="showProgress" class="progress mb-4 mx-auto" style="max-width: 300px;">
            <div class="progress-bar progress-bar-striped progress-bar-animated" 
                role="progressbar" 
                :style="{ width: loadingProgress + '%' }" 
                :aria-valuenow="loadingProgress" 
                aria-valuemin="0" 
                aria-valuemax="100">
                {{ loadingProgress }}%
            </div>
        </div>
    </div>
</div>
          

        <!-- Footer component -->
        <footer-component></footer-component>

    </div>

    <!-- Vue 3 and Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/vue@3.3.4/dist/vue.global.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Pinia and VueDemi -->
    <script src="https://cdn.jsdelivr.net/npm/vue-demi@0.14.6/lib/index.iife.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/pinia@2.1.7/dist/pinia.iife.js"></script>

    <!-- Custom JavaScript -->
    <script type="module" src="js/character-details.js"></script>
</body>

</html>